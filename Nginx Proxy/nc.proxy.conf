server {
        listen 80;
        server_name nc.example.com;
        server_tokens off;
        return 301 https://$server_name$request_uri;

}
server {
        listen 443 ssl;
        server_name nc.example.com;
        server_tokens off;

        ssl_certificate /etc/letsencrypt/live/nc.example.com/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/nc.example.com/privkey.pem;

        ssl_ciphers 'EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH';

        ssl_prefer_server_ciphers on;

        ssl_session_cache shared:SSL:10m;
        ssl_session_timeout 180m;

        client_max_body_size 500M;

        location / {
          proxy_set_header Host $host;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto  https;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-Host $server_name;
          proxy_redirect off;
          proxy_pass http://ns.tailnet.ts.net:8080;
        }
}
